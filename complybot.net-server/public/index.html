<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ComplyBot - Affordable ADA Compliance</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/favicon.png" type="image/png">
</head>
<body>

  <header>
    <div class="logo-nav">
      <img src="images/new_logo.png" alt="ComplyBot Logo" class="logo">
      <nav>
        <a href="index.html">Home</a>
        <a href="blog.html">Blog</a>
        <a href="help.html">Help Center</a>
      </nav>
    </div>
    <h1>Protect Your Website from ADA Lawsuits — Fast & Affordable</h1>
    <p>Run a free scan. Fix everything. Get your compliance certificate for as low as $29.</p>
    <a href="#pricing" class="cta-btn">View Plans</a>
  </header>

  <main>
    <section id="how-it-works">
      <h2>How ComplyBot Works</h2>
      <div class="steps">
        <div class="step">
          <h3>1️⃣ Quick Free Scan</h3>
          <p>Scan your site for ADA & WCAG issues in seconds.</p>
        </div>
        <div class="step">
          <h3>2️⃣ Instant Fixes</h3>
          <p>Our AI suggests one-click fixes to pass compliance checks.</p>
        </div>
        <div class="step">
          <h3>3️⃣ Stay Protected</h3>
          <p>Get your certificate & optional monitoring for peace of mind.</p>
        </div>
      </div>
    </section>

    <section id="pricing">
      <h2>Simple Transparent Pricing</h2>
      <div class="pricing-tiers">
        <div class="plan">
          <h3>Starter Scan</h3>
          <p>Scan + fix up to 10 pages. Perfect for small businesses.</p>
          <strong>$29 one-time</strong>
          <ul>
            <li>Automated WCAG/ADA scan</li>
            <li>Code-level fixes</li>
            <li>PDF Compliance Report</li>
            <li>"ComplyBot Verified" badge</li>
          </ul>
          <button class="cta-btn upgrade-btn">Get Started</button>
        </div>

        <div class="plan">
          <h3>Human Audit</h3>
          <p>Full manual review with mobile & keyboard checks.</p>
          <strong>$99 one-time</strong>
          <ul>
            <li>Everything in Starter +</li>
            <li>Human accessibility audit</li>
            <li>Remediation plan PDF</li>
            <li>Accessibility statement included</li>
          </ul>
          <button class="cta-btn upgrade-btn">Request Audit</button>
        </div>

        <div class="plan">
          <h3>Monthly Monitoring</h3>
          <p>Keep your site compliant long-term with monthly checks.</p>
          <strong>$29/mo</strong>
          <ul>
            <li>Monthly re-scan</li>
            <li>Updated reports + alerts</li>
            <li>Priority email support</li>
            <li>Auto-refresh badge</li>
          </ul>
          <button class="cta-btn upgrade-btn">Subscribe</button>
        </div>

        <div class="plan">
          <h3>Add-Ons</h3>
          <p>Customize your compliance with these extras:</p>
          <ul>
            <li>Accessibility Statement – $49</li>
            <li>Fix-It-For-Me Hour – $59/hr</li>
            <li>PDF Review – $39</li>
            <li>Consult Call – $49 (30 mins)</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="scan">
      <h2>Start Your Free Quick Scan</h2>
      <form action="/scan" method="POST">
        <p>Enter your website URL and email to get started:</p>
        <input type="text" name="url" placeholder="https://yourwebsite.com" required autocomplete="url">
        <input type="email" name="email" placeholder="you@example.com" required autocomplete="email">
        <button type="submit" class="cta-btn">Run Free Scan</button>
      </form>
    </section>

    <section id="testimonials">
      <h2>What People Say</h2>
      <blockquote>“ComplyBot saved my local bakery from a nasty ADA lawsuit. Worth every penny.” — Sarah K.</blockquote>
      <blockquote>“I love the simple pricing. We sleep better knowing we're covered.” — Mike D.</blockquote>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 ComplyBot.net | <a href="mailto:support@complybot.net">support@complybot.net</a></p>
  </footer>

  <!-- ⚡ Stripe Checkout Trigger Script -->
  <script>
  // Save email + url on scan form submit
  const form = document.querySelector('form[action="/scan"]');
  if (form) {
    form.addEventListener('submit', function (e) {
      const url = document.querySelector('input[name="url"]').value;
      const email = document.querySelector('input[name="email"]').value;
      localStorage.setItem('url', url);
      localStorage.setItem('email', email);
    });
  }

  // Attach checkout upgrade handler to all upgrade buttons
  document.querySelectorAll('.upgrade-btn').forEach(btn => {
    btn.addEventListener('click', async () => {
      const email = localStorage.getItem('email');
      const url = localStorage.getItem('url');

      if (!email || !url) {
        alert('Please run a scan first from the homepage.');
        return;
      }

      try {
        const res = await fetch('/create-checkout-session', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, url })
        });

        const { url: checkoutUrl } = await res.json();
        if (!checkoutUrl) throw new Error("Missing checkout URL from server");
        window.location.href = checkoutUrl;
      } catch (err) {
        alert("⚠️ Error starting checkout. Please try again.");
        console.error(err);
      }
    });
  });
</script>

</body>
</html>
